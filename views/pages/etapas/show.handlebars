<section class="page-etapas show-etapa">
    <div class="container">

        <form method="POST" id="formEtapa" class="form {{ formAction }}">
            <div class="data">
                <div class="label campeonato-da-etapa">
                    <div class="label-inputs">                
                        <select class="input" name="campeonatoEtapa">
                            <option value="" hidden>Selecione o campeonato</option>
                            {{#each campeonatos}}
                                <option value="{{get this 'id'}}" {{#ifCond (get this 'id') '==' (get ../etapa 'campeonatoId')}} selected {{/ifCond}}>{{get this 'nome'}}</option>
                            {{/each}}
                        </select>
                    </div>
                </div>

                <div class="label numero-da-etapa">
                    <div class="label-inputs">  
                        <input class="input" type="number" name="numeroEtapa" placeholder="NÃºmero da etapa" value="{{get etapa 'numero'}}"/>
                    </div>
                </div>

                <div class="label data-do-etapa">
                    <div class="label-inputs">                
                        <input class="input" type="datetime-local" name="dataEtapa" value="{{getDateTime (get etapa 'data')}}"/>
                    </div>
                </div>

                <div class="label actions">
                    <div class="label-inputs">  

                        {{#ifCond formAction '==' 'update'}}
                            <button type="button" class="button remove-button" id="btnExcluirEtapa">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16.243" height="16.243" viewBox="0 0 16.243 16.243">
                                    <g transform="translate(-3.879 -3.756)">
                                        <line x1="12" y2="12" transform="translate(6 5.877)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                                        <line x2="12" y2="12" transform="translate(6 5.877)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                                    </g>
                                </svg>
                                <span>Excluir</span>
                            </button>

                            <button type="button" class="button secondary-button save-button" id="btnSalvarEtapa">
                                <svg xmlns="http://www.w3.org/2000/svg" width="438.528" height="438.534" viewBox="0 0 438.528 438.534">
                                    <path d="M432.823,121.049q-5.709-13.7-13.709-21.695L339.173,19.412q-7.988-7.987-21.7-13.7T292.357,0H27.409A26.433,26.433,0,0,0,7.995,7.993,26.421,26.421,0,0,0,0,27.407V411.126a26.426,26.426,0,0,0,7.992,19.417,26.45,26.45,0,0,0,19.414,7.991H411.127a27.277,27.277,0,0,0,27.4-27.408V146.178Q438.531,134.754,432.823,121.049Zm-250.1-75.372a9.259,9.259,0,0,1,9.137-9.131h54.819a9.264,9.264,0,0,1,9.134,9.131v91.362a9.264,9.264,0,0,1-9.134,9.135H191.862a9.259,9.259,0,0,1-9.137-9.135V45.677ZM328.906,401.991H109.633V292.355H328.906Zm73.094,0H365.441V283.218a27.289,27.289,0,0,0-27.4-27.411H100.5a27.291,27.291,0,0,0-27.409,27.411V401.991H36.544V36.542H73.088V155.313A27.289,27.289,0,0,0,100.5,182.72H264.953a27.292,27.292,0,0,0,27.4-27.407V36.542q4.281,0,11.136,2.853T313.2,45.1l80.232,80.23q2.853,2.854,5.708,9.851T402,146.178V401.991Z" transform="translate(-0.003 0)"/>
                                </svg>
                                <span>Salvar</span>
                            </button>
                        {{/ifCond}}

                        {{#ifCond formAction '==' 'create'}}
                            <button type="button" class="button secondary-button add-button" id="btnAdicionarEtapa">   
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                                    <path d="M12,7a1,1,0,0,0-1,1v3H8a1,1,0,0,0,0,2h3v3a1,1,0,0,0,2,0V13h3a1,1,0,0,0,0-2H13V8A1,1,0,0,0,12,7Zm0-5A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.011,8.011,0,0,1,12,20Z" transform="translate(-2 -2)" fill-rule="evenodd"/>
                                </svg>
                                <span>Adicionar</span>
                            </button>
                        {{/ifCond}}
                        
                    </div>
                </div>
            </div>
        </form>

        {{#ifCond formAction '==' 'update'}}
            <div class="content">
                
                <div class="actions-competidores">

                    {{#ifCond etapa.dataValues.status '==' 0}}
                        <div class="label modal-competidor">
                            <div class="label-inputs">
                                <button class="button primary-button" id="btnModalCompetidor" type="button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                                        <path d="M12,7a1,1,0,0,0-1,1v3H8a1,1,0,0,0,0,2h3v3a1,1,0,0,0,2,0V13h3a1,1,0,0,0,0-2H13V8A1,1,0,0,0,12,7Zm0-5A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.011,8.011,0,0,1,12,20Z" transform="translate(-2 -2)" fill-rule="evenodd"/>
                                    </svg>
                                    <span>Adicionar competidor</span>
                                </button>
                            </div>
                        </div>
                    {{/ifCond}}

                    {{#ifCond etapa.dataValues.status '!=' 0}}
                        <div class="label modal-backup">
                            <div class="label-inputs">
                                <button class="button secondary-button" id="btnModalBackup">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26.386" height="17.59" viewBox="0 0 26.386 17.59">
                                        <path d="M21.274,10.64a8.237,8.237,0,0,0-15.392-2.2A6.594,6.594,0,0,0,6.6,21.59H20.889a5.481,5.481,0,0,0,.385-10.95Zm-.385,8.751H6.6a4.394,4.394,0,0,1-.484-8.762l1.176-.121.55-1.044a6.033,6.033,0,0,1,11.28,1.605l.33,1.649,1.682.121a3.28,3.28,0,0,1-.242,6.552ZM8.8,13.895h2.8v3.3h3.188v-3.3h2.8l-4.4-4.4Z" transform="translate(0 -4)" fill-rule="evenodd"/>
                                    </svg>
                                    <span>Importar backup</span>
                                </button>
                            </div>
                        </div>
                    {{/ifCond}}
                </div>

                <div class="table-competidores">
                    
                    {{#each competidores}}

                    <div class="secao-genero">
                        <div class="genero-title">
                            <span class="title">
                                <svg xmlns="http://www.w3.org/2000/svg" width="12.363" height="10.145" viewBox="0 0 12.363 10.145">
                                    <path d="M7,6.82V17.18a1,1,0,0,0,1.54.84l8.14-5.18a1,1,0,0,0,0-1.69L8.54,5.98A1,1,0,0,0,7,6.82Z" transform="translate(18.181 -7) rotate(90)" fill-rule="evenodd"/>
                                </svg>
                                <h2>{{get this.genero 'nome'}}</h2>
                            </span>
                        </div>
                        <div class="genero-content">
                            
                            {{#each this.categorias}}

                            <div class="secao-categoria">
                                <div class="categoria-title">
                                    <span class="title">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="12.363" height="10.145" viewBox="0 0 12.363 10.145">
                                            <path d="M7,6.82V17.18a1,1,0,0,0,1.54.84l8.14-5.18a1,1,0,0,0,0-1.69L8.54,5.98A1,1,0,0,0,7,6.82Z" transform="translate(18.181 -7) rotate(90)" fill-rule="evenodd"/>
                                        </svg>
                                        <h2>{{get this.categoria 'nome'}}</h2>
                                    </span>
                                </div>
                                <div class="categoria-content">

                                    <table class="secao-competidores">
                                        <tbody>

                                            {{#each this.competidores}}

                                                <tr id="competidor-{{get this 'id'}}"
                                                    data-cod="{{get this 'id'}}"
                                                    data-competidor-id="{{get (get this 'competidor') 'id'}}"
                                                    data-competidor-nome="{{get (get this 'competidor') 'nome'}}"
                                                    data-competidor-genero-id="{{get (get this 'competidor') 'generoId'}}"
                                                    data-competidor-cpf="{{get (get this 'competidor') 'cpf'}}"
                                                    data-categoria-id="{{get this 'categoriaId'}}"
                                                    data-rfid="{{get this 'rfid'}}"
                                                    data-placa="{{get this 'placa'}}"
                                                    data-dci-time="{{getTime (getDataValue this 'dci')}}"
                                                    data-dci-date="{{getDate (getDataValue this 'dci')}}"
                                                    data-dcf-time="{{getTime (getDataValue this 'dcf')}}"
                                                    data-dcf-date="{{getDate (getDataValue this 'dcf')}}"
                                                    data-dct="{{get this 'dct'}}"
                                                    data-pi-time="{{getTime (getDataValue this 'pi')}}"
                                                    data-pi-date="{{getDate (getDataValue this 'pi')}}"
                                                    data-pf-time="{{getTime (getDataValue this 'pf')}}"
                                                    data-pf-date="{{getDate (getDataValue this 'pf')}}"
                                                    data-pt="{{get this 'pt'}}">

                                                    <td>{{get (get this 'competidor') 'nome'}}</td>
                                                    <td>RFID: {{get this 'rfid'}}</td>
                                                    <td>PLACA: {{get this 'placa'}}</td>
                                                    <td>DCI: {{getTime (get this 'dci')}}</td>
                                                    <td>DCF: {{getTime (get this 'dcf')}}</td>
                                                    <td>DCT: {{getUTCTime (get this 'dct')}}</td>
                                                    <td>PI: {{getTime (get this 'pi')}}</td>
                                                    <td>PF: {{getTime (get this 'pf')}}</td>
                                                    <td>PT: {{getUTCTime (get this 'pt')}}</td>
                                                    <td>
                                                        {{#ifCond ../../../etapa.dataValues.status '==' 0}}
                                                        <button class="table-button remove-row" data-target="#competidor-{{get this 'id'}}">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="25.44" height="28.044" viewBox="0 0 25.44 28.044">
                                                                <g id="Lixo" transform="translate(-2 -1)">
                                                                    <path d="M3,6H26.44" transform="translate(0 1.209)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                                                    <path d="M23.231,7.209V25.44a2.6,2.6,0,0,1-2.6,2.6H7.6A2.6,2.6,0,0,1,5,25.44V7.209m3.907,0V4.6a2.6,2.6,0,0,1,2.6-2.6H16.72a2.6,2.6,0,0,1,2.6,2.6v2.6" transform="translate(0.604)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                                                    <line y2="8" transform="translate(12.44 14)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                                                    <line y2="8" transform="translate(17.44 14)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                                                                </g>
                                                            </svg>
                                                        </button>
                                                        
                                                        <button class="table-button edit-row editar-competidor" data-target="#competidor-{{get this 'id'}}">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="28.089" height="28.089" viewBox="0 0 28.089 28.089">
                                                                <g id="Editar" transform="translate(-6 -2.6)">
                                                                    <path d="M18.414,19.936H15V16.523L27.923,3.6l3.414,3.414Z" transform="translate(1.753)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                                                    <path d="M28.944,10.657V26.506a2.445,2.445,0,0,1-2.438,2.438H9.438A2.445,2.445,0,0,1,7,26.506V9.438A2.445,2.445,0,0,1,9.438,7H25.53" transform="translate(0 0.745)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                                                </g>
                                                            </svg>
                                                        </button>
                                                        {{/ifCond}}

                                                        {{#ifCond ../../../etapa.dataValues.status '!=' 0}}
                                                        <button class="table-button edit-row editar-tempo-competidor" data-target="#competidor-{{get this 'id'}}">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="28.089" height="28.089" viewBox="0 0 28.089 28.089">
                                                                <g id="Editar" transform="translate(-6 -2.6)">
                                                                    <path d="M18.414,19.936H15V16.523L27.923,3.6l3.414,3.414Z" transform="translate(1.753)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                                                    <path d="M28.944,10.657V26.506a2.445,2.445,0,0,1-2.438,2.438H9.438A2.445,2.445,0,0,1,7,26.506V9.438A2.445,2.445,0,0,1,9.438,7H25.53" transform="translate(0 0.745)" fill="none" stroke="#707070" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                                                                </g>
                                                            </svg>
                                                        </button>
                                                        {{/ifCond}}
                                                    </td>
                                                </tr>

                                            {{/each}}

                                        </tbody>
                                    </table>

                                </div>
                            </div>

                            {{/each}}

                        </div>
                    </div>

                    {{/each}}

                </div>
            </div>   
                
            <div class="actions-etapa">
                <span class="status" id="status">{{get etapa 'status'}}</span>
                
                {{#ifCond etapa.dataValues.status '==' 0}}
                    <button type="button" class="button primary-button" id="btnIniciarDc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14.372" height="17.514" viewBox="0 0 14.372 17.514">
                            <path d="M7,7.237V21.914A1.414,1.414,0,0,0,9.182,23.1l11.532-7.338a1.417,1.417,0,0,0,0-2.394L9.182,6.047A1.414,1.414,0,0,0,7,7.237Z" transform="translate(-7 -5.819)" fill-rule="evenodd"/>
                        </svg>
                        <span>Iniciar DC</span>
                    </button>
                {{/ifCond}}

                {{#ifCond etapa.dataValues.status '==' 1}}
                    <button type="button" class="button secondary-button" id="btnLimparDc">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24.187" height="19.35" viewBox="0 0 24.187 19.35">
                            <path d="M9.693,8.192l3.278,4.126s-.627,3.868-2.894,5.673S0,19.281,0,19.281s.144-.875.416-2.095l3.576-4.239a.227.227,0,0,0-.251-.359l-2.283.835A8.592,8.592,0,0,1,3.521,9.739C5.788,7.934,9.693,8.192,9.693,8.192Zm14.363-7.02L23.305.228a.6.6,0,0,0-.847-.1L13.673,6.851l-1.29-1.624a.416.416,0,0,0-.7.084l-.957,2.062L14,11.5l2.222-.471a.416.416,0,0,0,.24-.665L15.174,8.74,23.96,2.021a.6.6,0,0,0,.1-.848Z" transform="translate(0 0)" fill="#94e182"/>
                        </svg>
                        <span>Limpar DC</span>
                    </button>

                    <button type="button" class="button primary-button" id="btnIniciarProva">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14.372" height="17.514" viewBox="0 0 14.372 17.514">
                            <path d="M7,7.237V21.914A1.414,1.414,0,0,0,9.182,23.1l11.532-7.338a1.417,1.417,0,0,0,0-2.394L9.182,6.047A1.414,1.414,0,0,0,7,7.237Z" transform="translate(-7 -5.819)" fill-rule="evenodd"/>
                        </svg>
                        <span>Iniciar Prova</span>
                    </button>
                {{/ifCond}}

                {{#ifCond etapa.dataValues.status '==' 2}}
                    <button type="button" class="button secondary-button" id="btnLimparProva">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24.187" height="19.35" viewBox="0 0 24.187 19.35">
                            <path d="M9.693,8.192l3.278,4.126s-.627,3.868-2.894,5.673S0,19.281,0,19.281s.144-.875.416-2.095l3.576-4.239a.227.227,0,0,0-.251-.359l-2.283.835A8.592,8.592,0,0,1,3.521,9.739C5.788,7.934,9.693,8.192,9.693,8.192Zm14.363-7.02L23.305.228a.6.6,0,0,0-.847-.1L13.673,6.851l-1.29-1.624a.416.416,0,0,0-.7.084l-.957,2.062L14,11.5l2.222-.471a.416.416,0,0,0,.24-.665L15.174,8.74,23.96,2.021a.6.6,0,0,0,.1-.848Z" transform="translate(0 0)" fill="#94e182"/>
                        </svg>
                        <span>Limpar Prova</span>
                    </button>
                {{/ifCond}}
                
            </div>
        {{/ifCond}}
    </div>
</section>

{{#section 'footer'}}

<!-- MODAL ADICIONAR COMPETIDOR -->
<div class="modal modal-competidor" id="modalAdicionarCompetidor">
    <div class="modal-container">
        <button class="close-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="19.207" height="19.207" viewBox="0 0 19.207 19.207">
                <g transform="translate(0.707 0.707)">
                    <path d="M0,0H25.163" transform="translate(0 0) rotate(45)" stroke="#707070" stroke-width="2"/>
                    <path d="M0,0H25.163" transform="translate(0 17.793) rotate(-45)" stroke="#707070" stroke-width="2"/>
                </g>
            </svg>
        </button>

        <form class="form" id="formAdicionarCompetidor">

            <div class="data">
                <div class="label cpf-do-competidor">
                    <span class="label-title">CPF do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="cpfCompetidor"/>
                        <button class="button secondary-button" id="btnBuscarCompetidor" type="button">
                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 129 129">
                                <g>
                                    <path d="M51.6,96.7c11,0,21-3.9,28.8-10.5l35,35c0.8,0.8,1.8,1.2,2.9,1.2s2.1-0.4,2.9-1.2c1.6-1.6,1.6-4.2,0-5.8l-35-35   c6.5-7.8,10.5-17.9,10.5-28.8c0-24.9-20.2-45.1-45.1-45.1C26.8,6.5,6.5,26.8,6.5,51.6C6.5,76.5,26.8,96.7,51.6,96.7z M51.6,14.7   c20.4,0,36.9,16.6,36.9,36.9C88.5,72,72,88.5,51.6,88.5c-20.4,0-36.9-16.6-36.9-36.9C14.7,31.3,31.3,14.7,51.6,14.7z"/>
                                </g>
                            </svg>
                            <span>Buscar</span>
                        </button>
                    </div>
                </div>

                <div class="label nome-do-competidor">
                    <span class="label-title">Nome do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="nomeCompetidor" disabled/>
                    </div>
                </div>

                <div class="label categoria-do-competidor">
                    <span class="label-title">Categoria do competidor</span>
                    <div class="label-inputs">                
                        <select class="input" name="categoriaCompetidor" disabled>
                            <option value="" hidden>Selecione a categoria</option>
                            <optgroup class="catMasculina" label="Masculina">
                                {{#each categorias}}
                                    {{#ifCond (get this 'generoId') '==' 1}}
                                        <option value="{{get this 'id'}}">{{get this 'nome'}}</option>                                            
                                    {{/ifCond}}
                                {{/each}}
                            </optgroup>
                            <optgroup class="catFeminina" label="Feminina">
                                {{#each categorias}}
                                    {{#ifCond (get this 'generoId') '==' 2}}
                                        <option value="{{get this 'id'}}">{{get this 'nome'}}</option>                                            
                                    {{/ifCond}}
                                {{/each}}
                            </optgroup>
                        </select>    
                    </div>
                </div>

                <div class="label placa-do-competidor">
                    <span class="label-title">Placa do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="placa" disabled/>
                    </div>
                </div>

                <div class="label rfid-do-competidor">
                    <span class="label-title">RFID</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="rfid" disabled/>
                    </div>
                </div>

                <input type="hidden" name="idCompetidor"/>
            </div>

        </form>

        <div class="modal-actions">
            <button class="button secondary-button" id="btnCancelar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16.245" height="16.212" viewBox="0 0 16.245 16.212">
                    <path d="M15.88,14.086l-6-6,5.963-5.963A1.246,1.246,0,0,0,14.085.365L8.122,6.328,2.159.365A1.246,1.246,0,0,0,.4,2.127L6.361,8.09l-6,6a1.246,1.246,0,0,0,1.762,1.762l6-6,6,6a1.246,1.246,0,1,0,1.762-1.762Z" transform="translate(0 0)"/>
                </svg>
                <span>Cancelar</span>
            </button>
            <button class="button primary-button" id="btnAdicionarCompetidor" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <path d="M12,7a1,1,0,0,0-1,1v3H8a1,1,0,0,0,0,2h3v3a1,1,0,0,0,2,0V13h3a1,1,0,0,0,0-2H13V8A1,1,0,0,0,12,7Zm0-5A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8.011,8.011,0,0,1,12,20Z" transform="translate(-2 -2)" fill-rule="evenodd"/>
                </svg>
                <span>Adicionar</span>
            </button>
        </div>
    </div>
</div>

<!-- MODAL EDITAR COMPETIDOR -->
<div class="modal modal-competidor" id="modalEditarCompetidor">
    <div class="modal-container">
        <button class="close-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="19.207" height="19.207" viewBox="0 0 19.207 19.207">
                <g transform="translate(0.707 0.707)">
                    <path d="M0,0H25.163" transform="translate(0 0) rotate(45)" stroke="#707070" stroke-width="2"/>
                    <path d="M0,0H25.163" transform="translate(0 17.793) rotate(-45)" stroke="#707070" stroke-width="2"/>
                </g>
            </svg>
        </button>

        <form class="form" id="formEditarCompetidor">

            <div class="data">
                <div class="label cpf-do-competidor">
                    <span class="label-title">CPF do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="cpfCompetidor" disabled/>
                    </div>
                </div>

                <div class="label nome-do-competidor">
                    <span class="label-title">Nome do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="nomeCompetidor" disabled/>
                    </div>
                </div>

                <div class="label categoria-do-competidor">
                    <span class="label-title">Categoria do competidor</span>
                    <div class="label-inputs">                
                        <select class="input" name="categoriaCompetidor">
                            <option value="" hidden>Selecione a categoria</option>
                            <optgroup class="catMasculina" label="Masculina">
                                {{#each categorias}}
                                    {{#ifCond (get this 'generoId') '==' 1}}
                                        <option value="{{get this 'id'}}">{{get this 'nome'}}</option>                                            
                                    {{/ifCond}}
                                {{/each}}
                            </optgroup>
                            <optgroup class="catFeminina" label="Feminina">
                                {{#each categorias}}
                                    {{#ifCond (get this 'generoId') '==' 2}}
                                        <option value="{{get this 'id'}}">{{get this 'nome'}}</option>                                            
                                    {{/ifCond}}
                                {{/each}}
                            </optgroup>
                        </select>    
                    </div>
                </div>

                <div class="label placa-do-competidor">
                    <span class="label-title">Placa do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="placa"/>
                    </div>
                </div>

                <div class="label rfid-do-competidor">
                    <span class="label-title">RFID</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="rfid"/>
                    </div>
                </div>

                <input type="hidden" name="idCompetidor"/>
            </div>

        </form>

        <div class="modal-actions">
            <button class="button secondary-button" id="btnCancelar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16.245" height="16.212" viewBox="0 0 16.245 16.212">
                    <path d="M15.88,14.086l-6-6,5.963-5.963A1.246,1.246,0,0,0,14.085.365L8.122,6.328,2.159.365A1.246,1.246,0,0,0,.4,2.127L6.361,8.09l-6,6a1.246,1.246,0,0,0,1.762,1.762l6-6,6,6a1.246,1.246,0,1,0,1.762-1.762Z" transform="translate(0 0)"/>
                </svg>
                <span>Cancelar</span>
            </button>

            <button class="button primary-button" id="btnSalvarCompetidor">
                <svg xmlns="http://www.w3.org/2000/svg" width="438.528" height="438.534" viewBox="0 0 438.528 438.534">
                    <path d="M432.823,121.049q-5.709-13.7-13.709-21.695L339.173,19.412q-7.988-7.987-21.7-13.7T292.357,0H27.409A26.433,26.433,0,0,0,7.995,7.993,26.421,26.421,0,0,0,0,27.407V411.126a26.426,26.426,0,0,0,7.992,19.417,26.45,26.45,0,0,0,19.414,7.991H411.127a27.277,27.277,0,0,0,27.4-27.408V146.178Q438.531,134.754,432.823,121.049Zm-250.1-75.372a9.259,9.259,0,0,1,9.137-9.131h54.819a9.264,9.264,0,0,1,9.134,9.131v91.362a9.264,9.264,0,0,1-9.134,9.135H191.862a9.259,9.259,0,0,1-9.137-9.135V45.677ZM328.906,401.991H109.633V292.355H328.906Zm73.094,0H365.441V283.218a27.289,27.289,0,0,0-27.4-27.411H100.5a27.291,27.291,0,0,0-27.409,27.411V401.991H36.544V36.542H73.088V155.313A27.289,27.289,0,0,0,100.5,182.72H264.953a27.292,27.292,0,0,0,27.4-27.407V36.542q4.281,0,11.136,2.853T313.2,45.1l80.232,80.23q2.853,2.854,5.708,9.851T402,146.178V401.991Z" transform="translate(-0.003 0)"/>
                </svg>
                <span>Editar</span>
            </button>
        </div>
    </div>
</div>

<!-- MODAL EDITAR TEMPO DO COMPETIDOR -->
<div class="modal modal-competidor" id="modalEditarTempoCompetidor">
    <div class="modal-container">
        <button class="close-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="19.207" height="19.207" viewBox="0 0 19.207 19.207">
                <g transform="translate(0.707 0.707)">
                    <path d="M0,0H25.163" transform="translate(0 0) rotate(45)" stroke="#707070" stroke-width="2"/>
                    <path d="M0,0H25.163" transform="translate(0 17.793) rotate(-45)" stroke="#707070" stroke-width="2"/>
                </g>
            </svg>
        </button>

        <form class="form" id="formEditarTempoCompetidor">

            <div class="data">

                <div class="label nome-do-competidor">
                    <span class="label-title">Nome do competidor</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" name="nomeCompetidor" disabled/>
                    </div>
                </div>                

                <div class="label dci-do-competidor">
                    <span class="label-title">DCI</span>
                    <div class="label-inputs">                
                        <input class="input" type="time" step="2" name="dci"/>
                    </div>
                </div>

                <div class="label dcf-do-competidor">
                    <span class="label-title">DCF</span>
                    <div class="label-inputs">                
                        <input class="input" type="time" step="2" name="dcf"/>
                    </div>
                </div>

                {{#ifCond etapa.dataValues.status '==' 2}}
                <div class="label pi-do-competidor">
                    <span class="label-title">PI</span>
                    <div class="label-inputs">                
                        <input class="input" type="time" step="2" name="pi"/>
                    </div>
                </div>

                <div class="label pf-do-competidor">
                    <span class="label-title">PF</span>
                    <div class="label-inputs">                
                        <input class="input" type="time" step="2" name="pf"/>
                    </div>
                </div>
                {{/ifCond}}

                <input type="hidden" name="idCompetidor"/>
            </div>

        </form>

        <div class="modal-actions">
            <button class="button secondary-button" id="btnCancelar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16.245" height="16.212" viewBox="0 0 16.245 16.212">
                    <path d="M15.88,14.086l-6-6,5.963-5.963A1.246,1.246,0,0,0,14.085.365L8.122,6.328,2.159.365A1.246,1.246,0,0,0,.4,2.127L6.361,8.09l-6,6a1.246,1.246,0,0,0,1.762,1.762l6-6,6,6a1.246,1.246,0,1,0,1.762-1.762Z" transform="translate(0 0)"/>
                </svg>
                <span>Cancelar</span>
            </button>

            <button class="button primary-button" id="btnSalvarTempoCompetidor">
                <svg xmlns="http://www.w3.org/2000/svg" width="438.528" height="438.534" viewBox="0 0 438.528 438.534">
                    <path d="M432.823,121.049q-5.709-13.7-13.709-21.695L339.173,19.412q-7.988-7.987-21.7-13.7T292.357,0H27.409A26.433,26.433,0,0,0,7.995,7.993,26.421,26.421,0,0,0,0,27.407V411.126a26.426,26.426,0,0,0,7.992,19.417,26.45,26.45,0,0,0,19.414,7.991H411.127a27.277,27.277,0,0,0,27.4-27.408V146.178Q438.531,134.754,432.823,121.049Zm-250.1-75.372a9.259,9.259,0,0,1,9.137-9.131h54.819a9.264,9.264,0,0,1,9.134,9.131v91.362a9.264,9.264,0,0,1-9.134,9.135H191.862a9.259,9.259,0,0,1-9.137-9.135V45.677ZM328.906,401.991H109.633V292.355H328.906Zm73.094,0H365.441V283.218a27.289,27.289,0,0,0-27.4-27.411H100.5a27.291,27.291,0,0,0-27.409,27.411V401.991H36.544V36.542H73.088V155.313A27.289,27.289,0,0,0,100.5,182.72H264.953a27.292,27.292,0,0,0,27.4-27.407V36.542q4.281,0,11.136,2.853T313.2,45.1l80.232,80.23q2.853,2.854,5.708,9.851T402,146.178V401.991Z" transform="translate(-0.003 0)"/>
                </svg>
                <span>Editar</span>
            </button>
        </div>
    </div>
</div>

<!-- MODAL DE LOG -->
<div class="modal modal-log show" id="modalLog">
    <div class="modal-container">
        <button class="close-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="19.207" height="19.207" viewBox="0 0 19.207 19.207">
                <g transform="translate(0.707 0.707)">
                    <path d="M0,0H25.163" transform="translate(0 0) rotate(45)" stroke="#707070" stroke-width="2"/>
                    <path d="M0,0H25.163" transform="translate(0 17.793) rotate(-45)" stroke="#707070" stroke-width="2"/>
                </g>
            </svg>
        </button>

        <div class="log">
            <svg xmlns="http://www.w3.org/2000/svg" width="111.802" height="127.638" viewBox="0 0 111.802 127.638">
                <path id="Caminho_124" data-name="Caminho 124" d="M16.37,15.057V10.231H69.633V31.859H91.073V70.293h10.392V25.039L76.453.025H5.967V47.251h10.4Z" transform="translate(1.931 -0.025)"/>
                <path id="Caminho_125" data-name="Caminho 125" d="M77.55,59.874V49.045H72.5a21.636,21.636,0,0,0-2.9-6.559L72.987,39.1,66.84,32.954l-3.386,3.391a21.5,21.5,0,0,0-6.519-2.891V28.391h-10.9v5.063a21.593,21.593,0,0,0-6.658,2.971l-3.25-3.25-6.146,6.141,3.306,3.3a21.607,21.607,0,0,0-2.808,6.389h-5.06V59.9h5.06a21.726,21.726,0,0,0,2.888,6.527l-3.386,3.386,6.146,6.141,3.386-3.386a21.657,21.657,0,0,0,6.54,2.9V80.52H56.914V75.468a21.659,21.659,0,0,0,6.4-2.811l3.522,3.519,6.146-6.141-3.469-3.474a21.584,21.584,0,0,0,2.979-6.692H77.55ZM52.373,62.11a7.653,7.653,0,1,1,7.653-7.653A7.653,7.653,0,0,1,52.373,62.11Z" transform="translate(34.253 47.118)"/>
                <path id="Caminho_126" data-name="Caminho 126" d="M57.935,54.822h5.9V42.185h-5.9a25.208,25.208,0,0,0-3.381-7.653l3.953-3.95-7.169-7.171-3.95,3.956a25.294,25.294,0,0,0-7.608-3.373v-5.91H27.053v5.91a25.148,25.148,0,0,0-7.765,3.466L15.5,23.666,8.324,30.832l3.857,3.857a25.108,25.108,0,0,0-3.274,7.453H3V54.856H8.9a25.193,25.193,0,0,0,3.373,7.619L8.324,66.428l7.169,7.163,3.953-3.95a25.28,25.28,0,0,0,7.632,3.378v5.9H39.751v-5.9a25.274,25.274,0,0,0,7.475-3.277l4.11,4.107L58.5,66.686l-4.049-4.052A25.245,25.245,0,0,0,57.935,54.822ZM33.416,58.929A10.427,10.427,0,1,1,43.842,48.5,10.428,10.428,0,0,1,33.416,58.929Z" transform="translate(-3 29.988)"/>
            </svg>
            <p class="log-title">Log de registros</p>
            <ul class="log-list">

            </ul>
        </div>

        <div class="modal-actions">
            <button class="button secondary-button" id="btnLive">
                <svg viewBox="155.194 87.002 102.506 92.255" width="102.506" height="92.255">
                    <path d="M 199.458 156.659 L 218.002 146.036 C 221.124 144.265 221.124 139.746 218.002 137.929 L 199.458 127.305 C 196.336 125.535 192.469 127.818 192.469 131.359 L 192.469 152.559 C 192.469 156.147 196.336 158.43 199.458 156.659 Z M 248.381 104.708 L 213.016 104.708 L 226.715 91.009 C 227.647 90.077 227.647 88.633 226.715 87.701 C 225.783 86.769 224.339 86.769 223.407 87.701 L 206.447 104.661 L 189.487 87.701 C 188.555 86.769 187.111 86.769 186.179 87.701 C 185.247 88.633 185.247 90.077 186.179 91.009 L 199.877 104.708 L 164.513 104.708 C 159.387 104.708 155.194 108.854 155.194 114.026 L 155.194 169.938 C 155.194 175.064 159.387 179.257 164.513 179.257 L 248.381 179.257 C 253.506 179.257 257.7 175.064 257.7 169.938 L 257.7 114.026 C 257.7 108.854 253.506 104.708 248.381 104.708 Z M 243.722 169.938 L 169.172 169.938 C 166.609 169.938 164.513 167.842 164.513 165.279 L 164.513 118.686 C 164.513 116.123 166.609 114.026 169.172 114.026 L 243.722 114.026 C 246.284 114.026 248.381 116.123 248.381 118.686 L 248.381 165.279 C 248.381 167.842 246.284 169.938 243.722 169.938 Z"></path>
                </svg>
                <span>Ao vivo</span>
            </button>
            <button class="button secondary-button" id="btnCancelar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16.245" height="16.212" viewBox="0 0 16.245 16.212">
                    <path d="M15.88,14.086l-6-6,5.963-5.963A1.246,1.246,0,0,0,14.085.365L8.122,6.328,2.159.365A1.246,1.246,0,0,0,.4,2.127L6.361,8.09l-6,6a1.246,1.246,0,0,0,1.762,1.762l6-6,6,6a1.246,1.246,0,1,0,1.762-1.762Z" transform="translate(0 0)"/>
                </svg>
                <span>Cancelar</span>
            </button>
            <button class="button primary-button" id="btnFinalizar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="20.427" viewBox="0 0 16 20.427">
                    <path d="M20.636,4.013a.661.661,0,0,0-.727,0c-2.545,1.6-4.436.582-6.545-.582-2.182-1.164-4.727-2.473-8-.509A1.01,1.01,0,0,0,5,3.649V21.613a.687.687,0,0,0,.727.727.687.687,0,0,0,.727-.727V14.267c2.4-1.309,4.145-.364,6.182.727a10.092,10.092,0,0,0,4.655,1.527A6.327,6.327,0,0,0,20.636,15.5.764.764,0,0,0,21,14.849V4.667A.764.764,0,0,0,20.636,4.013Z" transform="translate(-5 -1.913)"/>
                </svg>
                <span>Finalizar</span>
            </button>
        </div>
    </div>
</div>

<!-- MODAL DE BACKUP -->
<div class="modal modal-backup" id="modalBackup">
    <div class="modal-container">
        <button class="close-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="19.207" height="19.207" viewBox="0 0 19.207 19.207">
                <g transform="translate(0.707 0.707)">
                    <path d="M0,0H25.163" transform="translate(0 0) rotate(45)" stroke="#707070" stroke-width="2"/>
                    <path d="M0,0H25.163" transform="translate(0 17.793) rotate(-45)" stroke="#707070" stroke-width="2"/>
                </g>
            </svg>
        </button>

        <form class="form" id="formBackup">

            <div class="data">

                <div class="label arquivo-backup">
                    <span class="label-title">Arquivo de backup</span>
                    <div class="label-inputs">                
                        <input class="input" type="text" id="nomeArquivoBackup" disabled/>
                        <button class="button secondary-button" id="btnSelecionarArquivoBackup" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16.988" height="22.409" viewBox="0 0 16.988 22.409">
                                <path d="M78.294,50.081c-.181-1.506-1.394-1.562-2.371-1.367a2.137,2.137,0,0,0-.934.544c-.5-.46-.767-.767-1.548-.7a2.59,2.59,0,0,0-1.3.53c-.4-.711-1.492-.5-1.492-.5-.432.167-.446-.084-.446-.4.014-.795,0-1.59,0-2.385a1.832,1.832,0,0,0-.572-1.381,1.892,1.892,0,0,0-2.12-.488,1.99,1.99,0,0,0-1.353,2.008c-.014,1.618,0,3.221,0,4.839v3.57A10.2,10.2,0,0,0,66.51,57.6a6.2,6.2,0,0,0,5.8,4.17,6.027,6.027,0,0,0,5.717-4.156C78.712,55.129,78.419,52.591,78.294,50.081Zm-1.283,5.927a4.754,4.754,0,0,1-9.482,0c-.084-1.673-.014-3.361-.014-5.048h-.028V46.121c0-.516.084-.976.725-.962.586.014.683.46.683.948v5.606c0,.474.042.948.641.962s.669-.446.669-.934c0-.377-.014-.753.014-1.116.042-.418.265-.725.711-.711a.657.657,0,0,1,.669.739c0,.418-.014.837,0,1.255s.167.739.641.753c.516.014.683-.335.7-.781.014-.39,0-.795,0-1.185,0-.474.209-.781.683-.795s.683.335.711.781c.014.39.014.795,0,1.185,0,.46.181.795.683.781.46-.014.628-.321.628-.767,0-.418-.014-.837,0-1.255s.223-.739.683-.739a.67.67,0,0,1,.711.767C77.053,52.452,77.108,54.237,77.011,56.008Z" transform="translate(-61.476 -39.358)" fill="#94e182"/>
                                <path d="M48.7,34.649a.671.671,0,0,1-.586-.321,4.575,4.575,0,1,1,8.437-2.454.7.7,0,1,1-1.394,0,3.179,3.179,0,1,0-5.871,1.7.7.7,0,0,1-.209.962A.78.78,0,0,1,48.7,34.649Z" transform="translate(-45.336 -25.166)" fill="#94e182"/>
                                <path d="M34.218,22.5a.671.671,0,0,1-.586-.321,6.63,6.63,0,1,1,12.23-3.542.7.7,0,1,1-1.394,0,5.236,5.236,0,1,0-9.664,2.8.7.7,0,0,1-.209.962A.759.759,0,0,1,34.218,22.5Z" transform="translate(-32.6 -12)" fill="#94e182"/>
                            </svg>
                            <span>Selecionar</span>
                        </button>
                    </div>
                </div>             

                <input type="file" name="arquivoBackup" id="arquivoBackup" accept="text/plain" hidden/>
            </div>

        </form>

        <div class="modal-actions">
            <button class="button secondary-button" id="btnCancelar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16.245" height="16.212" viewBox="0 0 16.245 16.212">
                    <path d="M15.88,14.086l-6-6,5.963-5.963A1.246,1.246,0,0,0,14.085.365L8.122,6.328,2.159.365A1.246,1.246,0,0,0,.4,2.127L6.361,8.09l-6,6a1.246,1.246,0,0,0,1.762,1.762l6-6,6,6a1.246,1.246,0,1,0,1.762-1.762Z" transform="translate(0 0)"/>
                </svg>
                <span>Cancelar</span>
            </button>

            <button class="button primary-button" id="btnImportarBackup">
                <svg xmlns="http://www.w3.org/2000/svg" width="26.386" height="17.59" viewBox="0 0 26.386 17.59">
                    <path d="M21.274,10.64a8.237,8.237,0,0,0-15.392-2.2A6.594,6.594,0,0,0,6.6,21.59H20.889a5.481,5.481,0,0,0,.385-10.95Zm-.385,8.751H6.6a4.394,4.394,0,0,1-.484-8.762l1.176-.121.55-1.044a6.033,6.033,0,0,1,11.28,1.605l.33,1.649,1.682.121a3.28,3.28,0,0,1-.242,6.552ZM8.8,13.895h2.8v3.3h3.188v-3.3h2.8l-4.4-4.4Z" transform="translate(0 -4)" fill-rule="evenodd"/>
                </svg>
                <span>Importar</span>
            </button>
        </div>
    </div>
</div> 

{{/section}}

{{#section 'scripts'}}
    <script>
        let etapaStatus = {{ etapa.dataValues.status }};
        let etapaId = {{#if (get etapa 'id')}} {{get etapa 'id'}} {{else}} '' {{/if}};
    </script>
    <script src="/scripts/pages/etapas/show.js"></script>
{{/section}}